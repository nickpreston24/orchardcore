@using Microsoft.AspNetCore.Mvc.TagHelpers
@using OrchardCore.Models
@using CodeMechanic.Types

@{
    Layout = "_Layout";
   
}

<partial name="_CalendarView"></partial>


@* <script> *@
@*     const currentUrl = window.location.href; *@
@*     console.log(currentUrl); *@
@*     const current_page = currentUrl.match(/\/(\w+)\//i)[1]; *@
@*     console.log(current_page); *@
@*     function setup_admin_page(){ *@
@*         return {   *@
@*             current_page_name: current_page *@
@*         } *@
@*     } *@
@* </script> *@


@* @inject ICalendarEventService calendar *@
@* @{ *@
@*     Layout = "_Layout"; *@
@*     var count = 0; *@
@*     var calendar_event_count = await calendar.CountExistingEvents(); *@
@* *@
@*     if (calendar_event_count == 0) *@
@*         await calendar.SeedCalendar(30); *@
@* *@
@*     var all_events = await calendar.GetAll(); *@
@*     var published_events = await calendar.Search(new CalendarEvent() { status = CalendarEventStatus.Published.Name }); *@
@* *@
@*     var current_event = all_events.FirstOrDefault(); *@
@*     var ui_settings = new UISettings() { CurrentTheme = "forest" }; *@
@* } *@
@* *@
@* <div *@
@*     x-data="setup()" *@
@*     class="" *@
@*     style="margin-top:100px;"> *@
@* *@
@* *@
@*     <div *@
@*         class="flex flex-row gap-2"> *@
@* *@
@*         <section class="w-2/3 margin-8"> *@
@* *@
@*             <div role="tablist" class="tabs tabs-boxed"> *@
@* *@
@*                 <div class="flex flex-row items-center justify-center gap-2"> *@
@*                     <template x-for="tab in tabs"> *@
@*                         <a role="tab.role" *@
@*                            x-on:click="on_tab_click(tab.name)" *@
@*                            x-text="tab.name" :class="tab.classname"> *@
@*                         </a> *@
@*                     </template> *@
@* *@
@*                 </div> *@
@* *@
@*             </div> *@
@* *@
@*             <div x-show="current_tab.name==='Calendar'"> *@
@*                 <div id="calendar_container"> *@
@*                     <partial name="_OrchardCalendar" model="@all_events"/> *@
@*                 </div> *@
@*             </div> *@
@* *@
@*             <div x-show="current_tab.name==='Event List'"> *@
@*                 <partial name="_OrchardEventList" model="@all_events"/> *@
@*             </div> *@
@* *@
@*         </section> *@
@* *@
@*         <section class="w-1/3 margin-8"> *@
@* *@
@*             <join> *@
@* *@
@*                 <button class="btn join-item" *@
@*                         x-on:click="options_panel.add_button.show=!options_panel.add_button.show" *@
@*                         hx-get *@
@*                         hx-target="#create_form" *@
@*                         :class="options_panel.add_button.classname" *@
@*                         hx-controller="Admin" *@
@*                         hx-action="OnGetCreateForm"> *@
@*                     Add *@
@*                 </button> *@
@*                 <button class="btn join-item" *@
@*                         :class="options_panel.danger_button.classname" *@
@*                         js x-on:click="options_panel.danger_button.show=!options_panel.danger_button.show"> *@
@*                     Danger Zone *@
@*                 </button> *@
@* *@
@*                 <button class="btn join-item" *@
@*                         :class="options_panel.ui_settings_button.classname" *@
@*                         js x-on:click="options_panel.ui_settings_button.show=!options_panel.ui_settings_button.show"> *@
@*                     UI Settings *@
@*                 </button> *@
@* *@
@*             </join> *@
@* *@
@*             <div id="create_form" *@
@*                  x-show="options_panel.add_button.show"> *@
@*                 <partial name="_CreateEventForm" model="@current_event"></partial> *@
@*             </div> *@
@* *@
@*             <div id="ui_settings" *@
@* *@
@*                  x-show="options_panel.ui_settings_button.show"> *@
@*                 <partial name="_UI_Settings_Panel" model="@ui_settings"></partial> *@
@*             </div> *@
@* *@
@*             $1$ DANGER ZONE PANEL #1# *@
@*             <div x-show="options_panel.danger_button.show" class="border-error border-2"> *@
@*                 <partial name="_DangerZonePanel"/> *@
@*             </div> *@
@* *@
@*         </section> *@
@* *@
@*     </div> *@
@* *@
@* </div> *@
@* *@
@* <script> *@
@* function setup(){ *@
@*     return { *@
@*        current_tab: { *@
@*             role:'tab',  *@
@*             name: 'Calendar', *@
@*             active: true *@
@*        }, *@
@*         *@
@*        on_tab_click(tab_name ='sometab', debug=false) { *@
@*             *@
@*            // find tab *@
@*            !!debug && console.log("clicked tab " + tab_name); *@
@*           this.current_tab = this.tabs.find(t=>t.name === tab_name); *@
@*             !!debug &&  console.log('tabs : ', this.tabs.length); *@
@*           !!debug &&   console.log('found : ', this?.current_tab?.name); *@
@*            let others = this.tabs.filter(t=>t.name !== tab_name).map(x=>x.active=false); *@
@*            !!debug &&  console.log(others); *@
@*            !!debug &&  console.log(current_tab); *@
@*             *@
@*            // update tab *@
@*           this.current_tab.active=true; *@
@*            *@
@*        }, *@
@*         *@
@*        tabs: [ *@
@*            { *@
@*                 role:'tab',  *@
@*                 name: 'Calendar', *@
@*                 partial_name: '_EventCalendar', *@
@*                 active:true,  *@
@*                 get classname() {return this.active ? "tab tab-active" : "tab"} *@
@*            }, *@
@*            { *@
@*                 role:'tab', *@
@*                 name: 'Event List', *@
@*                 active: false, *@
@*                 partial_name: 'HydroEventList', *@
@*                 get classname() {return this.active ? "tab tab-active" : "tab"} *@
@*            }, *@
@*            // class="tab tab-active" *@
@*        ], *@
@*        edits_enabled: true, *@
@*        date_value: Date.now,  *@
@*        next_event: { *@
@*            title: '', *@
@*            Description: '', *@
@*            start: Date.now, *@
@*            allDay: true *@
@*        }, *@
@*        selected_event: {}, *@
@*        current_handler: 'SaveEvent', *@
@*        current_target: '#calendar_container', *@
@*        options_panel: { *@
@*            show_kinds: true, *@
@*            show_edit_form: false,     *@
@*            show_actions_menu: false, *@
@*             *@
@*             *@
@*            // Reactive options for buttons in the option panel *@
@*            ui_settings_button: { *@
@*                show: false, *@
@*                 get classname() { *@
@*                  return this.show ? 'btn btn-secondary join-item' : 'btn join-item' *@
@*                 } *@
@*               }, *@
@*            danger_button: { *@
@*             show: false, *@
@*              get classname() { *@
@*               return this.show ? 'btn btn-secondary join-item' : 'btn join-item' *@
@*              } *@
@*            }, *@
@*            add_button: { *@
@*               show: false, *@
@*               get classname() { *@
@*                return this.show ? 'btn btn-secondary join-item' : 'btn join-item' *@
@*               } *@
@*            } *@
@*        }, *@
@*       *@
@*    }     *@
@* } *@
@* </script> *@
@* *@
@* <style> *@
@*     #mainNav{ *@
@*         background: black; *@
@*     } *@
@* </style> *@

@* SCRAPS *@

@* *@
@* *@
@* <div class=""> *@
@* *@
@* *@
@*         <span hx-get *@
@*               hx-controller="Calendar" *@
@*               hx-trigger="init,load" *@
@*               hx-swap="outerHTML" *@
@*               hx-action="OnGetAlpineCounter"> *@
@*         </span> *@
@* *@
@*         <div class="flex flex-row"> *@
@* *@
@*             <section class="w-1/2"> *@
@* *@
@*                 <div class="card w-96 bg-base-100 shadow-xl"> *@
@*                     <figure> *@
@*                         <img src="https://daisyui.com/images/stock/photo-1606107557195-0e29a4b5b4aa.jpg" alt="Shoes"/> *@
@*                     </figure> *@
@*                     <div class="card-body"> *@
@*                         <h2 class="card-title">Shoes!</h2> *@
@*                         <p>If a dog chews shoes whose shoes does he choose?</p> *@
@*                         <div class="card-actions justify-end"> *@
@*                             <button class="btn btn-primary">Buy Now</button> *@
@*                         </div> *@
@*                     </div> *@
@*                 </div> *@
@* *@
@*             </section> *@
@* *@
@* *@
@*             <section class="w-1/2"> *@
@* *@
@*                 <div class="card w-96 bg-base-100 shadow-xl"> *@
@*                     <figure> *@
@*                         <img src="https://daisyui.com/images/stock/photo-1606107557195-0e29a4b5b4aa.jpg" alt="Shoes"/> *@
@*                     </figure> *@
@*                     <div class="card-body"> *@
@*                         <h2 class="card-title">Shoes!</h2> *@
@*                         <p>If a dog chews shoes whose shoes does he choose?</p> *@
@*                         <div class="card-actions justify-end"> *@
@*                             <button class="btn btn-primary">Buy Now</button> *@
@*                         </div> *@
@*                     </div> *@
@*                 </div> *@
@* *@
@*             </section> *@
@* *@
@* *@
@*         </div> *@
@* *@
@* *@
@*     </div> *@


@* <hydro name="HydroCounterV2">... counter v2...</hydro> *@


@* *@
@* <div x-data="{ open: false }"> *@
@*          <button @@click="open = true" class="btn btn-info">Expand</button> *@
@* *@
@*          <span x-show="open"> *@
@*              Content... *@
@*          </span> *@
@*      </div> *@



@* 
 Sample button, demonstrating HTMX's ability to call our controller and send back an updated button
 Set show to 'true', to enable it.
 *@
@* *@
@* <div x-if="true"> *@
@* *@
@*     <template x-cloak> *@
@* *@
@*         <button *@
@*             x-show="false" *@
@*             hx-get *@
@*             hx-controller="Calendar" *@
@*             hx-action="OnGetUpdatedButton" *@
@*             hx-swap="outerHTML" *@
@*             class="btn btn-primary border-accent border-2"> *@
@*             Foo *@
@*         </button> *@
@* *@
@*     </template> *@
@* </div> *@